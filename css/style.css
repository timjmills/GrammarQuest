        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:linear-gradient(135deg,#e8eaf6 0%,#e3f2fd 50%,#fce4ec 100%);--card:#fff;--text:#333;--muted:#666;--display:#f5f7fa;--size:26px}
        body{font-family:'Poppins',sans-serif;background:var(--bg);min-height:100vh;padding:20px;color:var(--text)}
        .container{max-width:900px;margin:0 auto}

        .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:15px}
        .day-badge{background:linear-gradient(135deg,#5c6bc0,#7e57c2);color:#fff;padding:12px 24px;border-radius:30px;font-weight:700;font-size:1rem;display:flex;align-items:center;gap:8px}
        .day-badge::before{content:'üìö'}
        .day-info{color:var(--muted);font-size:0.9rem;margin-left:10px}
        .segment-badge{background:#e1bee7;color:#7b1fa2;padding:4px 12px;border-radius:12px;font-size:0.75rem;font-weight:600;margin-left:10px}
        .nav{display:flex;gap:10px;align-items:center}
        .nav-btn{background:#fff;color:#333;border:1px solid #ddd;padding:10px 18px;border-radius:8px;cursor:pointer;font-size:0.9rem;font-weight:500;transition:all 0.2s}
        .nav-btn:hover{background:#5c6bc0;color:#fff;border-color:#5c6bc0}
        .nav-btn:disabled{opacity:0.4;cursor:not-allowed}
        .go-input{width:70px;padding:10px;border:1px solid #ddd;border-radius:8px;text-align:center;font-size:0.9rem}
        .go-btn{background:#5c6bc0;color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:600}

        .controls{display:flex;align-items:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}
        .help-btn{background:#fff;border:1px solid #ddd;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:0.85rem;display:flex;align-items:center;gap:6px}
        .help-btn::before{content:'‚ùì'}
        .size-ctrl{display:flex;align-items:center;gap:10px;font-size:0.85rem;color:var(--muted)}
        .size-ctrl input{width:100px}
        .size-val{background:#fff;padding:4px 12px;border-radius:6px;font-weight:600;border:1px solid #eee}

        .card{background:var(--card);border-radius:20px;padding:24px;margin-bottom:20px;box-shadow:0 4px 20px rgba(0,0,0,0.06)}
        .card-header{display:flex;align-items:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}
        .card-num{background:linear-gradient(135deg,#42a5f5,#5c6bc0);color:#fff;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1rem}
        .find-label{font-size:0.85rem;color:var(--muted)}
        .find-label .tag{padding:2px 10px;border-radius:12px;font-weight:600;font-size:0.75rem;margin:0 2px}
        .find-label .err{background:#ef5350;color:#fff}
        .find-label .noun{background:#e3f2fd;color:#1565c0}
        .find-label .verb{background:#e8f5e9;color:#2e7d32}
        .find-label .adj{background:#fff3e0;color:#ef6c00}
        .find-label .pro{background:#f3e5f5;color:#7b1fa2}
        .find-label .prep{background:#e0f7fa;color:#00838f}
        .find-label .adv{background:#fce4ec;color:#c2185b}

        .sentence-display{font-family:'Crimson Pro',Georgia,serif;font-size:var(--size);line-height:2.8;padding:28px;background:var(--display);border-radius:16px;margin-bottom:16px;min-height:100px}
        .word{display:inline-block;position:relative;margin:0 3px}
        .word .abbr{position:absolute;top:-20px;left:50%;transform:translateX(-50%);font-size:0.65rem;font-family:'Poppins';font-weight:700;padding:2px 6px;border-radius:4px;white-space:nowrap}
        .word .abbr.N{background:#1565c0;color:#fff}
        .word .abbr.V{background:#2e7d32;color:#fff}
        .word .abbr.ADJ{background:#ef6c00;color:#fff}
        .word .abbr.PRO{background:#7b1fa2;color:#fff}
        .word .abbr.PREP{background:#00838f;color:#fff}
        .word .abbr.ADV{background:#c2185b;color:#fff}
        .word .abbr.CONJ{background:#5d4037;color:#fff}
        .word .abbr.ART{background:#455a64;color:#fff}
        .word .abbr.DEM{background:#6d4c41;color:#fff}
        .word .abbr.SUBCONJ{background:#00695c;color:#fff}
        .word .abbr.OBJPRO{background:#4a148c;color:#fff}
        .word .abbr.POSS{background:#ff8f00;color:#fff}
        .word .abbr.PP{background:#1b5e20;color:#fff}
        .word .abbr.RELPRO{background:#d84315;color:#fff}
        .word .abbr.PASS{background:#37474f;color:#fff}
        .word .abbr.MODAL{background:#6a1b9a;color:#fff}

        .manip-highlight{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff;padding:2px 8px;border-radius:6px;font-weight:600;box-shadow:0 2px 8px rgba(255,152,0,0.4)}

        .btn-row{display:flex;gap:12px;align-items:center;margin-bottom:16px;flex-wrap:wrap}
        .check-btn{background:linear-gradient(135deg,#42a5f5,#5c6bc0);color:#fff;border:none;padding:14px 28px;border-radius:30px;cursor:pointer;font-weight:700;font-size:0.95rem;transition:all 0.2s}
        .check-btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(66,165,245,0.4)}
        .check-btn:disabled{opacity:0.5;transform:none;cursor:not-allowed}
        .check-btn.complete{background:linear-gradient(135deg,#66bb6a,#43a047)}
        .reset-btn{background:#fff;border:1px solid #ddd;padding:12px 20px;border-radius:20px;cursor:pointer;font-size:0.85rem;display:flex;align-items:center;gap:6px}
        .reset-btn::before{content:'üîÑ'}

        .section{border-radius:14px;padding:16px;margin-top:14px;animation:slideIn 0.3s ease}
        @keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}

        .corr-section{background:linear-gradient(135deg,#fff8e1,#ffecb3)}
        .corr-item{background:#fff;border-radius:10px;padding:12px 14px;margin-bottom:10px;border-left:4px solid #ffc107}
        .corr-item.capitalization{border-left-color:#00bcd4}
        .corr-item.grammar{border-left-color:#ffc107}
        .corr-item.punctuation{border-left-color:#9c27b0}
        .corr-head{display:flex;align-items:center;gap:10px;margin-bottom:6px}
        .corr-type{font-size:0.65rem;padding:3px 8px;border-radius:6px;font-weight:700;color:#fff;text-transform:uppercase}
        .corr-type.capitalization{background:#00bcd4}
        .corr-type.grammar{background:#ffc107;color:#333}
        .corr-type.punctuation{background:#9c27b0}
        .corr-num{font-size:0.75rem;color:var(--muted)}
        .corr-change{font-size:1rem;margin-bottom:4px}
        .wrong{text-decoration:line-through;color:#e53935}
        .inline-corr{display:inline;position:relative}
        .inline-wrong{text-decoration:line-through;color:#c62828;background:#ffebee;padding:2px 4px;border-radius:3px}
        .inline-right{color:#2e7d32;font-weight:700;background:#c8e6c9;padding:3px 8px;border-radius:5px;margin-left:6px;border:2px solid #81c784}
        .inline-pulse{animation:correctPulse 0.6s ease}
        @keyframes correctPulse{0%{transform:scale(1.15);box-shadow:0 0 12px #4caf50}100%{transform:scale(1);box-shadow:none}}
        .inline-punct{color:#6a1b9a;font-weight:700;background:#e1bee7;padding:3px 8px;border-radius:5px;margin-left:4px;border:2px solid #ba68c8}
        .arrow{color:var(--muted);margin:0 8px}
        .right{color:#43a047;font-weight:700}
        .corr-explain{font-size:0.8rem;color:var(--muted);font-style:italic}

        .pos-section{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)}
        .pos-title{font-size:0.85rem;font-weight:600;color:#2e7d32;margin-bottom:12px;display:flex;align-items:center;gap:8px}
        .pos-title::before{content:'üè∑Ô∏è'}
        .pos-item{background:#fff;border-radius:10px;padding:10px 14px;margin-bottom:8px;display:flex;align-items:center;justify-content:space-between}
        .pos-item .check{color:#66bb6a;margin-right:8px}
        .pos-item .q{flex:1;font-size:0.85rem}
        .pos-item .ans{display:flex;align-items:center;gap:6px}
        .pos-item .word-box{padding:5px 12px;border-radius:8px;font-weight:600;font-size:0.9rem}
        .pos-item .word-box.noun{background:#e3f2fd;color:#1565c0}
        .pos-item .word-box.verb{background:#e8f5e9;color:#2e7d32}
        .pos-item .word-box.adj{background:#fff3e0;color:#ef6c00}
        .pos-item .word-box.pro{background:#f3e5f5;color:#7b1fa2}
        .pos-item .word-box.prep{background:#e0f7fa;color:#00838f}
        .pos-item .word-box.adv{background:#fce4ec;color:#c2185b}
        .pos-item .type-badge{font-size:0.65rem;padding:3px 8px;border-radius:6px;font-weight:700;color:#fff}
        .pos-item .type-badge.noun{background:#1565c0}
        .pos-item .type-badge.verb{background:#2e7d32}
        .pos-item .type-badge.adj{background:#ef6c00}
        .pos-item .type-badge.pro{background:#7b1fa2}
        .pos-item .type-badge.prep{background:#00838f}
        .pos-item .type-badge.adv{background:#c2185b}

        .manip-section{background:linear-gradient(135deg,#fff3e0,#ffe0b2)}
        .manip-title{font-size:0.85rem;font-weight:600;color:#e65100;margin-bottom:12px;display:flex;align-items:center;gap:8px}
        .manip-title::before{content:'‚úèÔ∏è'}
        .manip-box{background:#fff;border-radius:10px;padding:14px}
        .manip-task{font-size:0.9rem;font-weight:600;margin-bottom:12px;color:#e65100}
        .manip-examples{display:flex;flex-direction:column;gap:8px}
        .manip-example{background:linear-gradient(135deg,#fff8e1,#ffe0b2);padding:12px 16px;border-radius:10px;font-family:'Crimson Pro',Georgia,serif;font-size:1.1rem;border-left:4px solid #ff9800}
        .manip-example .changed{background:#ff9800;color:#fff;padding:2px 8px;border-radius:4px;font-weight:600}

        .vocab-section{background:linear-gradient(135deg,#f3e5f5,#e1bee7)}
        .vocab-header{font-size:0.85rem;font-weight:600;color:#7b1fa2;margin-bottom:12px;display:flex;align-items:center;gap:8px}
        .vocab-header::before{content:'üìñ'}
        .vocab-word-row{display:flex;align-items:center;gap:10px;margin-bottom:12px}
        .vocab-star{font-size:1.3rem}
        .vocab-word{font-size:1.4rem;font-weight:700;color:#6a1b9a}
        .vocab-type{background:#9c27b0;color:#fff;padding:3px 12px;border-radius:15px;font-size:0.7rem;font-weight:700}
        .vocab-row{margin-bottom:10px}
        .vocab-label{font-weight:600;color:#7b1fa2;font-size:0.8rem;display:flex;align-items:center;gap:6px}
        .vocab-text{font-size:0.9rem;margin-top:3px}
        .vocab-simple{background:#f3e5f5;padding:10px 12px;border-radius:10px;margin-bottom:10px}
        .vocab-chips{display:flex;gap:6px;margin-top:6px;flex-wrap:wrap}
        .vocab-chips span{padding:4px 12px;border-radius:10px;font-size:0.8rem}
        .vocab-chips.similar span{background:#e1bee7;color:#6a1b9a}
        .vocab-chips.antonym span{background:#ffcdd2;color:#c62828}
        .vocab-chips.nonex span{background:#ffecb3;color:#e65100;font-style:italic}
        .vocab-chips.examples span{background:#c8e6c9;color:#2e7d32}
        .vocab-example{font-style:italic;color:var(--muted);padding:10px 12px;background:#fff;border-radius:10px;border-left:4px solid #9c27b0;margin-bottom:10px}
        .vocab-starter{background:#c8e6c9;padding:12px;border-radius:10px;margin-bottom:10px;border-left:4px solid #4caf50}
        .vocab-starter-label{font-weight:600;color:#2e7d32;font-size:0.8rem;display:flex;align-items:center;gap:6px;margin-bottom:6px}
        .vocab-starter-label::before{content:'üó£Ô∏è'}
        .vocab-starter-text{font-size:0.95rem;color:#1b5e20;font-weight:500}
        .vocab-why{background:#e1bee7;padding:12px;border-radius:10px;display:flex;gap:10px}
        .vocab-why-icon{font-size:1.1rem}
        .vocab-why-label{font-weight:600;color:#7b1fa2;font-size:0.8rem}
        .vocab-why-text{font-size:0.85rem;margin-top:2px}

        .help-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}
        .help-overlay.show{display:flex}
        .help-modal{background:var(--card);border-radius:20px;padding:30px;max-width:500px;max-height:80vh;overflow-y:auto;position:relative}
        .help-close{position:absolute;top:15px;right:15px;background:#f5f5f5;border:none;width:36px;height:36px;border-radius:50%;cursor:pointer;font-size:1.2rem}
        .help-title{font-size:1.2rem;color:#5c6bc0;margin-bottom:16px}
        .help-section{margin-bottom:16px}
        .help-section h3{color:#42a5f5;margin-bottom:8px;font-size:0.95rem}
        .help-section p{font-size:0.85rem;line-height:1.5;margin:4px 0}

        /* Popout / Individual Lesson Overlay */
        #popout-overlay{position:fixed;inset:0;background:var(--bg);display:flex;align-items:flex-start;justify-content:center;z-index:9999;padding:0;overflow-y:auto;animation:popoutFadeIn 0.3s ease}
        @keyframes popoutFadeIn{from{opacity:0}to{opacity:1}}
        @keyframes popoutSlideUp{from{opacity:0;transform:translateY(30px) scale(0.97)}to{opacity:1;transform:translateY(0) scale(1)}}
        .popout-container{background:var(--bg);width:100%;max-width:900px;min-height:100vh;padding:20px 20px 40px;animation:popoutSlideUp 0.4s ease}
        .popout-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #f0f0f0}
        .popout-header-left{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
        .popout-day-badge{background:linear-gradient(135deg,#5c6bc0,#7e57c2);color:#fff;padding:8px 18px;border-radius:20px;font-weight:700;font-size:0.9rem}
        .popout-sentence-label{font-size:1.1rem;font-weight:600;color:var(--text)}
        .popout-close{background:#f5f5f5;border:none;width:42px;height:42px;border-radius:50%;cursor:pointer;font-size:1.3rem;display:flex;align-items:center;justify-content:center;transition:all 0.2s;color:#666;flex-shrink:0}
        .popout-close:hover{background:#ef5350;color:#fff;transform:scale(1.1)}
        .popout-task-bar{font-size:0.9rem;color:var(--muted);margin-bottom:20px;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
        .popout-task-bar .tag{padding:2px 10px;border-radius:12px;font-weight:600;font-size:0.75rem;margin:0 2px}
        .popout-task-bar .err{background:#ef5350;color:#fff}
        .popout-task-bar .noun{background:#e3f2fd;color:#1565c0}
        .popout-task-bar .verb{background:#e8f5e9;color:#2e7d32}
        .popout-task-bar .adj{background:#fff3e0;color:#ef6c00}
        .popout-task-bar .pro{background:#f3e5f5;color:#7b1fa2}
        .popout-task-bar .prep{background:#e0f7fa;color:#00838f}
        .popout-task-bar .adv{background:#fce4ec;color:#c2185b}
        .popout-sentence{font-family:'Crimson Pro',Georgia,serif;font-size:calc(var(--size) * 1.25);line-height:3;padding:32px;background:var(--display);border-radius:16px;margin-bottom:20px;min-height:120px}
        .popout-btn-row{display:flex;gap:14px;align-items:center;margin-bottom:20px;flex-wrap:wrap}
        .popout-advance-btn{padding:16px 36px!important;font-size:1.05rem!important;border-radius:30px}
        .popout-btn{background:none;border:1px solid #ddd;width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;transition:all 0.2s;color:#999;margin-left:auto;flex-shrink:0}
        .popout-btn:hover{background:linear-gradient(135deg,#42a5f5,#5c6bc0);color:#fff;border-color:transparent;transform:scale(1.15);box-shadow:0 3px 12px rgba(66,165,245,0.4)}
        .print-btn{background:none;border:1px solid #ddd;width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:0.95rem;display:flex;align-items:center;justify-content:center;transition:all 0.2s;color:#999;flex-shrink:0}
        .print-btn:hover{background:linear-gradient(135deg,#66bb6a,#43a047);color:#fff;border-color:transparent;transform:scale(1.15);box-shadow:0 3px 12px rgba(76,175,80,0.4)}
        .popout-header-print{background:#f5f5f5;border:none;width:42px;height:42px;border-radius:50%;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;transition:all 0.2s;color:#666;flex-shrink:0}
        .popout-header-print:hover{background:#66bb6a;color:#fff;transform:scale(1.1)}

        @media(max-width:600px){.header{flex-direction:column;align-items:flex-start}.sentence-display{font-size:22px;padding:16px}.popout-container{padding:12px 12px 30px}.popout-sentence{font-size:calc(var(--size) * 1.1);padding:20px;line-height:2.6}.popout-header-left{gap:8px}.popout-sentence-label{font-size:0.95rem}}